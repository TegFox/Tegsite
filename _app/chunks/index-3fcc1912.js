import{E as l,s as q,F as w,G as z,H as S,I as j}from"./index-c6db0c01.js";const c=[];function g(t,i){return{subscribe:y(t,i).subscribe}}function y(t,i=l){let o;const r=new Set;function a(s){if(q(t,s)&&(t=s,o)){const n=!c.length;for(const e of r)e[1](),c.push(e,t);if(n){for(let e=0;e<c.length;e+=2)c[e][0](c[e+1]);c.length=0}}}function f(s){a(s(t))}function b(s,n=l){const e=[s,n];return r.add(e),r.size===1&&(o=i(a)||l),s(t),()=>{r.delete(e),r.size===0&&(o(),o=null)}}return{set:a,update:f,subscribe:b}}function A(t,i,o){const r=!Array.isArray(t),a=r?[t]:t,f=i.length<2;return g(o,b=>{let s=!1;const n=[];let e=0,d=l;const _=()=>{if(e)return;d();const u=i(r?n[0]:n,b);f?b(u):d=S(u)?u:l},h=a.map((u,p)=>w(u,m=>{n[p]=m,e&=~(1<<p),s&&_()},()=>{e|=1<<p}));return s=!0,_(),function(){z(h),d()}})}var v=Object.freeze(Object.defineProperty({__proto__:null,derived:A,readable:g,writable:y,get:j},Symbol.toStringTag,{value:"Module"}));export{v as s,y as w};
